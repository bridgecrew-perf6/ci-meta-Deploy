{"remainingRequest":"/home/tbranduardi/Documents/ProgettoTesi/Front-end/ci-meta/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/tbranduardi/Documents/ProgettoTesi/Front-end/ci-meta/src/components/InsertDocument.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/tbranduardi/Documents/ProgettoTesi/Front-end/ci-meta/src/components/InsertDocument.vue","mtime":1639649827155},{"path":"/home/tbranduardi/Documents/ProgettoTesi/Front-end/ci-meta/node_modules/cache-loader/dist/cjs.js","mtime":1637320216095},{"path":"/home/tbranduardi/Documents/ProgettoTesi/Front-end/ci-meta/node_modules/vue-loader/lib/index.js","mtime":1637320218959}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgoKZXhwb3J0IGRlZmF1bHQgKHsKICAgIG5hbWU6ICdpbnNlcnREb2N1bWVudCcsCiAgICBkYXRhKCl7CiAgICAgIHJldHVybnsKICAgICAgICBkb2N1bWVudFR5cGU6ICcnLAogICAgICAgIGluY2lwaXQ6ICcnLAogICAgICAgIHRyYW5zY3JpcHRpb246ICcnLAogICAgICAgIGxhbmd1YWdlOiAnJywKICAgICAgICBkYXRlOiAnJywgLy8gWWVhciAtIE1vbnRoIC0gRGF0ZQogICAgICAgIGlzRGF0ZURlZHVjZWQ6IGZhbHNlLAogICAgICAgIGNvbGxlY3Rpb246ICcnLAogICAgICAgIGZvbGRlcjogJycsCiAgICAgICAgc2hlbGZtYXJrOiAnJywKICAgICAgICBub3RlOiAnJywKICAgICAgICBpbnNlcnREb2NUeXBlOiBmYWxzZSwKICAgICAgICBuZXdEb2N1bWVudFR5cGU6ICcnLAogICAgICAgIGluc2VydExhbmd1YWdlOiBmYWxzZSwKICAgICAgICBuZXdMYW5ndWFnZTogJycsCiAgICAgICAgZXJyb3I6IGZhbHNlLAogICAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICB9CiAgICB9LAogICAgbWV0aG9kczogewogICAgICBhZGROZXdUeXBlKCkgewogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc3RvcmVEb2N1bWVudFR5cGUnLCB0aGlzLm5ld0RvY3VtZW50VHlwZSk7CiAgICAgIH0sCiAgICAgIGFkZE5ld0xhbmd1YWdlKCkgewogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc3RvcmVMYW5ndWFnZScsIHRoaXMubmV3TGFuZ3VhZ2UpOwogICAgICB9LAogICAgICAvKgogICAgICBpZCB8IHR5cGUgfCBpbmNpcGl0IHwgdHJhbnNjcmlwdGlvbiB8IG5vdGUgfCBzaGVsZm1hcmsgIHwgZm9sZGVyX251bWJlciB8IGlzX2RhdGVfZGVkdWNlZCB8IGlzX2RlbGV0ZWQgCiAgICAgIAogICAgICByb3V0ZSAvYXBpL3YxL2RvY3VtZW50Lzxwaz4gWydERUxFVEUnXQogICAgICByb3V0ZSAvYXBpL3YxL2RvY3VtZW50LzxpbnQ6cGs+IFsnR0VUJ10KICAgICAgcm91dGUgL2FwaS92MS9kb2N1bWVudC8gWydHRVQnXQogICAgICByb3V0ZSAvYXBpL3YxL2RvY3VtZW50L19pbmZvIFsnR0VUJ10KICAgICAgcm91dGUgL2FwaS92MS9kb2N1bWVudC8gWydQT1NUJ10KICAgICAgcm91dGUgL2FwaS92MS9kb2N1bWVudC88cGs+IFsnUFVUJ10gICAgIAoKICAgICAgKi8KICAgICAgYXN5bmMgc3VibWl0KCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICB0aGlzLmVycm9yID0gZmFsc2U7CiAgICAgICAgICBjb25zdCBkYXRhID0geyB0eXBlOiB0aGlzLmRvY3VtZW50VHlwZSwgCiAgICAgICAgICAgICAgICAgICAgICAgIGluY2lwaXQ6IHRoaXMuaW5jaXBpdCwKICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNjcmlwdGlvbjogdGhpcy50cmFuc2NyaXB0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICBub3RlOiB0aGlzLm5vdGUsCiAgICAgICAgICAgICAgICAgICAgICAgIHNoZWxmbWFyazogdGhpcy5zaGVsZm1hcmssCiAgICAgICAgICAgICAgICAgICAgICAgIGZvbGRlcl9udW1iZXI6IHRoaXMuZm9sZGVyX251bWJlciwKICAgICAgICAgICAgICAgICAgICAgICAgaXNfZGF0ZV9kZWR1Y2VkOiB0aGlzLmlzRGF0ZURlZHVjZWR9OwogICAgICAgICAgY29uc3QgaGVhZGVyID0geyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nICwgJ0F1dGhvcml6YXRpb24nOiB0aGlzLiRzdG9yZS5zdGF0ZS50b2tlbiB9OwogICAgICAgICAgY29uc29sZS5sb2coaGVhZGVyKTsKICAgICAgICAgIHRoaXMubG9hZGluZz10cnVlOwogICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLiRodHRwLnBvc3QoJ2h0dHA6Ly8nK3RoaXMuJHN0b3JlLnN0YXRlLmFkZHJlc3MrJzo1MDAwL2FwaS92MS9kb2N1bWVudC8nLCBkYXRhLCBoZWFkZXIpOwogICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YS5hY2Nlc3NfdG9rZW4pOwogICAgICAgIH0KICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgIHRoaXMuZXJyb3IgPSB0cnVlOwogICAgICAgIH0KICAgICAgICAKICAgICAgfSwKICAgIH0sCn0pCg=="},{"version":3,"sources":["InsertDocument.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"InsertDocument.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    \n    <b-container>\n      <b-row>\n        <b-overlay :show=\"insertDocType\" :opacity=\"1\">\n          <div style=\"display-inline\">\n            <b-col b-col sm=\"auto\">\n              <strong>Tipologia del documento &emsp;</strong>\n              <b-form-select size=\"sm\" v-model=\"documentType\" :options=\"this.$store.state.documentType\"/>\n              &emsp;oppure\n              <b-button variant=\"link\" @click=\"insertDocType = true\">\n                  Crea una nuova tipologia di documento\n              </b-button>\n            </b-col>\n          </div>\n          <template #overlay>\n            <b-input-group class=\"mt-3\">\n              <b-form-input v-model=\"newDocumentType\" placeholder=\"Inserisci la nuova tipologia\" />\n              <b-input-group-append>\n                <b-button variant=\"info\" @click=\"insertDocType=false & addNewType()\">\n                  Conferma\n                </b-button>\n                <b-button variant=\"outline-secondary\" @click=\"insertDocType=false\">Indietro</b-button>\n              </b-input-group-append>\n            </b-input-group>\n          </template>\n        </b-overlay>\n      </b-row>\n    </b-container>\n    <br>\n\n    <b-container>\n      <b-row>\n        <b-input-group class=\"mt-3\" style=\"display-inline\">\n              <strong>Incipit &emsp;</strong>\n              <b-form-input v-model=\"incipit\" maxlength=\"255\" placeholder=\"\" />\n            </b-input-group>\n      </b-row>\n    </b-container>\n    <br>\n    \n    <b-container>\n      <b-row>\n        <b-col style=\"display-inline\">\n          <strong>Trascrizione &emsp;</strong>\n          <b-form-textarea\n            id=\"textarea\"\n            v-model=\"transcription\"\n            placeholder=\"\"\n            rows=\"3\"\n            max-rows=\"6\"\n          ></b-form-textarea>\n        </b-col>\n      </b-row>\n    </b-container>\n    <br>\n\n    <b-container>\n      <b-row>\n        <b-overlay :show=\"insertLanguage\" :opacity=\"1\">\n          <div style=\"display-inline\">\n            <b-col>\n              <strong>Lingua del documento &emsp;</strong>\n              <b-form-select size=\"sm\" v-model=\"language\" :options=\"this.$store.state.language\"/>\n              &emsp;oppure\n              <b-button variant=\"link\" @click=\"insertLanguage = true\">\n                  Crea una nuova lingua\n              </b-button>\n            </b-col>\n          </div>\n          <template #overlay>\n            <b-input-group class=\"mt-3\">\n              <b-form-input v-model=\"newLanguage\" placeholder=\"Inserisci la nuova lingua\" />\n              <b-input-group-append>\n                <b-button variant=\"info\" @click=\"insertLanguage=false & addNewLanguage()\">\n                  Conferma\n                </b-button>\n                <b-button variant=\"outline-secondary\" @click=\"insertLanguage=false\">Indietro</b-button>\n              </b-input-group-append>\n            </b-input-group>\n          </template>\n        </b-overlay>\n      </b-row>\n    </b-container>\n    <br>\n\n    <b-container style=\"width: 100%\">\n      <b-row>\n        <b-col>\n          <strong>Data &emsp;</strong>\n          <input type=\"date\" v-model=\"date\" required pattern=\"\\d{4}-\\d{2}-\\d{2}\">\n        </b-col>\n        <b-col>\n          <b-form-checkbox size=\"md\" :v-model=\"isDateDeduced\">La data Ã¨ stata dedotta?</b-form-checkbox>\n        </b-col>\n        <b-col lg=\"8\">\n        </b-col>\n      </b-row>\n    </b-container>\n    <br>\n\n    <b-container style=\"width: 100%\">\n      <b-row>\n        <b-col>\n          <strong>Collection &emsp;</strong>\n          <b-form-input type=\"text\" v-model=\"collection\" />\n        </b-col>\n        <b-col>\n          <strong>Folder &emsp;</strong>\n          <b-form-input type=\"text\" v-model=\"folder\" />\n        </b-col>\n        <b-col><strong>Shelfmark &emsp;</strong>\n        <b-form-input type=\"text\" v-model=\"shelfmark\" /></b-col>\n      </b-row>\n    </b-container>\n    <br>\n\n    <b-container>\n      <b-row>\n        <b-col style=\"display-inline\">\n          <strong>Note &emsp;</strong>\n          <b-form-textarea\n            id=\"note\"\n            v-model=\"note\"\n            placeholder=\"\"\n            rows=\"3\"\n            max-rows=\"6\"\n          ></b-form-textarea>\n        </b-col>\n      </b-row>\n    </b-container>\n    <br>\n    <hr>\n  \n    <div class=\"text-center\">\n      <b-button v-show=\"!loading\" @click.prevent=\"submit()\">Submit</b-button>\n      <b-spinner v-show=\"loading\" variant=\"primary\"></b-spinner>\n      <p v-show=\"error\">Errore nella richiesta. Riprovare</p>\n    </div>\n\n  </div>\n</template>\n\n<script>\n\n\nexport default ({\n    name: 'insertDocument',\n    data(){\n      return{\n        documentType: '',\n        incipit: '',\n        transcription: '',\n        language: '',\n        date: '', // Year - Month - Date\n        isDateDeduced: false,\n        collection: '',\n        folder: '',\n        shelfmark: '',\n        note: '',\n        insertDocType: false,\n        newDocumentType: '',\n        insertLanguage: false,\n        newLanguage: '',\n        error: false,\n        loading: false,\n      }\n    },\n    methods: {\n      addNewType() {\n        this.$store.commit('storeDocumentType', this.newDocumentType);\n      },\n      addNewLanguage() {\n        this.$store.commit('storeLanguage', this.newLanguage);\n      },\n      /*\n      id | type | incipit | transcription | note | shelfmark  | folder_number | is_date_deduced | is_deleted \n      \n      route /api/v1/document/<pk> ['DELETE']\n      route /api/v1/document/<int:pk> ['GET']\n      route /api/v1/document/ ['GET']\n      route /api/v1/document/_info ['GET']\n      route /api/v1/document/ ['POST']\n      route /api/v1/document/<pk> ['PUT']     \n\n      */\n      async submit() {\n        try {\n          this.error = false;\n          const data = { type: this.documentType, \n                        incipit: this.incipit,\n                        transcription: this.transcription,\n                        note: this.note,\n                        shelfmark: this.shelfmark,\n                        folder_number: this.folder_number,\n                        is_date_deduced: this.isDateDeduced};\n          const header = { 'Content-Type': 'application/json' , 'Authorization': this.$store.state.token };\n          console.log(header);\n          this.loading=true;\n          const response = await this.$http.post('http://'+this.$store.state.address+':5000/api/v1/document/', data, header);\n          console.log(response.data.access_token);\n        }\n        catch (e) {\n          this.loading = false;\n          console.log(e);\n          this.error = true;\n        }\n        \n      },\n    },\n})\n</script>\n"]}]}